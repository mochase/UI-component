<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div class="slide">
        <div class="container">
            <img src="./1.jpeg" alt="" width="400" height="300" class="image-1"><!--
            --><img src="./4.jpeg" alt="" width="400" height="300" class="image-2"><!--
            --><img src="./3.jpeg" alt="" width="400" height="300" class="image-3"><!--
            --><img src="./1.jpeg" alt="" width="400" heigth="300" class="image-1">
        </div>
    </div>
    <div class="button-group">
        <div class="button-1"></div>
        <div class="button-2"></div>
        <div class="button-3"></div>
    </div>
    <style>
        .body {
            width: 100%
        }
        .slide {
            width: 400px;
            overflow-x: hidden;
            display: absolute
            
        }
        .container {
            width: 1800px;
        }
        .container img {
            margin: 0;
            padding: 0;
            font-size: 0;
        }
        .button-group div {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 100%;
            background-color: bisque;
            cursor: pointer
        }
    </style>
    <script>
        window.onload = function() {
            var target = 1
            var node = document.querySelector('.button-group')
            var slideNode = document.querySelector('.slide')
            var container = document.querySelector('.container')
            var timer = autoSlide()

            
            

            node.addEventListener('click', function(e){
                // clearInterval(timer)
                if (e.target.className === 'button-1') {
                    //按钮1
                    if (target === 2) {
                        slide(800, true)
                    }else if (target === 3) {
                        slide(400, true)
                    }
                    target = 1
                    // timer = autoSlide()

                } else if (e.target.className === 'button-2') {
                    //按钮2
                    if (target === 1) {
                        slide(400)
                    }else if (target === 3) {
                        slide(400, true, true)
                    }
                    target = 2
                    // timer = autoSlide()
                } else if (e.target.className === 'button-3') {
                    //按钮3
                    if (target === 1) {
                        slide(800)
                    } else if (target === 2) {
                        slide(400)
                    }
                    target = 3
                    // timer = autoSlide()
                }
            })

            function autoSlide() {
                var timer = setInterval(function() {
                    var $offset = 0
                    var speed = 50
                    var handle = setInterval(function() {  
                        if (400 - $offset > speed) {   
                            $offset += speed
                            slideNode.scrollLeft = (target - 1) * 400 + $offset
                        } else {
                            slideNode.scrollLeft = (target - 1) * 400 + 400
                            clearInterval(handle)
                            target ++
                        }
                    }, 1000 / 40)
                    if (target === 4) {                
                        slideNode.scrollLeft = 0
                        target = 1
                    }
                }, 5000)
                return timer
            }
            /*
            offset: 偏移量
            ifClear: 是否归零
            repeat： 是否继续滑动
            */ 
            function slide(offset, ifClear, repeat) {
                if (!offset) {
                    return
                }
                var speed = 100
                var $offset = 0
                var slideNode = document.querySelector('.slide')
                var initial = slideNode.scrollLeft
                var handle = setInterval(function() {
                    if (offset - $offset > speed) {   
                        $offset += speed
                        slideNode.scrollLeft =  initial + $offset
                    } else {
                        slideNode.scrollLeft = initial + offset
                        clearInterval(handle)
                        if (ifClear) {
                            slideNode.scrollLeft = 0
                        }
                        if (repeat) {
                            slide(400)
                        }
                    }
                }, 1000 / 40)
                
            }
        }


        
    </script>
</body>
</html>